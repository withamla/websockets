{"ts":1357186447333,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<html>\n<head>\n<title>Cloud9, NodeJS & Heroku: websockets for all</title>\n\n<script src=\"/socket.io/socket.io.js\"></script>\n\n<script>\nonerror = function (msg) {\nlog(msg);\n}\nfunction log(msg) {\ndocument.getElementById('log').appendChild(document.createTextNode(new Date() + ' ' + msg + '\\n'));\n}\nfunction status(msg) {\nlog(msg);\ndocument.getElementById('status').textContent = msg;\n}\nfunction clearLog() {\nvar e = document.getElementById('log');\nwhile (e.hasChildNodes()) {\ne.removeChild(e.firstChild);\n}\ne.appendChild(document.createTextNode('Log: \\n'));\n}\n</script>\n\n<script>\nvar socket = null;\nfunction connect() {\nlog('Connecting to local server...');\nif (socket == null) {\nsocket = io.connect(null,{'auto connect': false});\nsocket.on('connect', function () {\nstatus('Connected');\n});\n\nsocket.on('message', function (data) {\nlog(data);\n});\n}\nsocket.socket.connect();\n}\n\nfunction send() {\nif (socket && socket.socket.connected) {\nsocket.send(document.getElementById('text').value);\nlog('>' + document.getElementById('text').value);\n} else {\nlog('Not connected.');\n}\n}\n\nfunction send100() {\nif (socket && socket.socket.connected) {\nfor (var i = 0; i < 100; i += 1) {\nsocket.send('test'+ i);\nlog('> test' + i);\n}\n} else {\nlog('Not connected.');\n}\n}\n\nfunction update() {\nif (socket && socket.socket && socket.socket.transport) {\ndocument.getElementById('sessionId').textContent = socket.socket.transport.sessid;\ndocument.getElementById('transport').textContent = socket.socket.transport.name;\n} else {\ndocument.getElementById('sessionId').textContent = '-';\ndocument.getElementById('transport').textContent = '-';\n}\n}\nsetInterval(update, 10);\n\n</script>\n</head>\n\n<body onload=\"connect()\">\n<p>\n<label style='width:200px;float:left'>Status: <span id=\"status\">Idle</span></label>\n</p>\n<p>SessionId: <span id=\"sessionId\">-</span></p>\n<p>Transport: <span id=\"transport\">-</span></p>\n\n<p>\n<label>Message: <input id=\"text\" type=\"text\" size=\"80\" value=\"\"/></label>\n<input type=button value=\"Echo\" onclick=\"send()\">\n</p>\n\n<p>\n<input type=button value=\"Spam 100 packets\" onclick=\"send100()\" />\n<input type=button value=\"Clear log\" onclick=\"clearLog()\" />\n</p>\n\n<pre id=\"log\">Log:</pre>\n</body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2188}]],"length":2188}
